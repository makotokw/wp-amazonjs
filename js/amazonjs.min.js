!function(a){if(a){var b=a.browser.msie&&"6.0"==a.browser.version;a.extend({amazonjs:{isCustomerReviewEnabled:!1,resource:{},initTemplate:function(){var b=this.resource,c=["{{if SmallImage}}",'<div class="amazonjs_image">','<a href="${DetailPageURL}" title="${Title}" target="_blank">','<img src="${SmallImage.src}" width="${SmallImage.width}" height="${SmallImage.height}" style="max-width:${SmallImage.width}px" alt="${Title}"/>',"</a>","</div>","{{/if}}"].join(""),d=["{{if MediumImage}}",'<div class="amazonjs_image">','<a href="${DetailPageURL}" title="${Title}" target="_blank">','<img src="${MediumImage.src}" width="${MediumImage.width}" height="${MediumImage.height}" style="max-width:${MediumImage.width}px" alt="${Title}"/>',"</a>","</div>","{{/if}}"].join(""),e=["{{if LargeImage}}",'<div class="amazonjs_image">','<a href="${DetailPageURL}" title="${Title}" target="_blank">','<img src="${LargeImage.src}" width="${LargeImage.width}" height="${LargeImage.height}" style="max-width:${LargeImage.width}px" alt="${Title}"/>',"</a>","</div>","{{/if}}"].join(""),f=["{{if $item.isSale()}}","<b>"+b.ListPrice+'</b><span class="amazonjs_listprice">${ListPrice.FormattedPrice}</span><br/>',"{{if OfferSummary.LowestNewPrice}}<b>"+b.Price+"</b>${OfferSummary.LowestNewPrice.FormattedPrice}{{/if}}","<span>"+b.PriceUpdatedat+"</span>","{{else}}","<b>"+b.Price+"</b>${ListPrice.FormattedPrice}","<span>"+b.PriceUpdatedat+"</span>","{{/if}}"].join(""),g='{{if ListPrice}}<div class="amazonjs_price" title="'+b.PriceUsage+'">'+f+"</div>{{/if}}",h='{{if ListPrice}}<li class="amazonjs_price" title="'+b.PriceUsage+'">'+f+"</li>{{/if}}",i="";this.isCustomerReviewEnabled&&(i='<a href="${IFrameReviewURL}&TB_iframe=true&height=500&width=600" title="'+b.CustomerReviewTitle+'" target="_blank" class="amazonjs_review">'+b.SeeCustomerReviews+"</a>"),this.partial={smallImage:c,mediumImage:d,largeImage:e,price:g};var j={Small:['<div class="amazonjs_item">',c,'<div class="amazonjs_info" style="{{if SmallImage}}margin-left:${SmallImage.width}px;{{/if}}">','<h4><a href="${DetailPageURL}" title="${Title}" target="_blank">${Title}</a></h4>',"<ul>","{{if Creator}}<li>${Creator}</li>{{/if}}","{{if Manufacturer}}<li>${Manufacturer}</li>{{/if}}",h,"{{if PublicationDate}}<li><b>"+b.PublicationDate+"</b>${PublicationDate}</li>{{/if}}","{{if SalesRank}}<li><b>"+b.SalesRank+"</b>"+b.SalesRankValue+"</li>{{/if}}","</ul>","</div>",i,'<div class="amazonjs_footer"></div>',"</div>"],Music:['<div class="amazonjs_item amazonjs_music">',d,'<div class="amazonjs_info" style="{{if MediumImage}}margin-left:${MediumImage.width}px;{{/if}}">','<h4><a href="${DetailPageURL}" title="${Title}" target="_blank">${Title}</a></h4>',"<ul>","{{if Artist}}<li>${Artist}</li>{{/if}}","{{if Creator}}<li>${Creator}</li>{{/if}}","{{if Label}}<li>${Label}</li>{{/if}}",h,"{{if ReleaseDate}}<li><b>"+b.ReleaseDate+"</b>${ReleaseDate}</li>{{/if}}","{{if SalesRank}}<li><b>"+b.SalesRank+"</b>"+b.SalesRankValue+"</li>{{/if}}","{{if RunningTime}}<li><b>"+b.RunningTime+"</b>"+b.RunningTimeValue+"</li>{{/if}}","</ul>","</div>",i,'<div class="amazonjs_footer"></div>',"</div>"],Book:['<div class="amazonjs_item amazonjs_book">',d,'<div class="amazonjs_info" style="{{if MediumImage}}margin-left:${MediumImage.width}px;{{/if}}">','<h4><a href="${DetailPageURL}" title="${Title}" target="_blank">${Title}</a></h4>',"<ul>","<li><b>"+b.BookAuthor+"</b>${Author}</li>",h,"<li><b>"+b.BookPublicationDate+"</b>${PublicationDate}</li>","{{if SalesRank}}<li><b>"+b.SalesRank+"</b>"+b.SalesRankValue+"</li>{{/if}}","<li><b>${Binding}</b>"+b.NumberOfPagesValue+"</li>","<li><b>ISBN-10</b>${ISBN}</li>","<li><b>ISBN-13</b>${EAN}</li>","<li><b>"+b.BookPublisher+"</b>${Publisher}</li>","</ul>","</div>",i,'<div class="amazonjs_footer"></div>',"</div>"],eBooks:['<div class="amazonjs_item amazonjs_book">',d,'<div class="amazonjs_info" style="{{if MediumImage}}margin-left:${MediumImage.width}px;{{/if}}">','<h4><a href="${DetailPageURL}" title="${Title}" target="_blank">${Title}</a></h4>',"<ul>","<li><b>"+b.BookAuthor+"</b>${Author}</li>",h,"<li><b>"+b.BookPublicationDate+"</b>${PublicationDate}</li>","{{if SalesRank}}<li><b>"+b.SalesRank+"</b>"+b.SalesRankValue+"</li>{{/if}}","<li><b>${Binding}</b>"+b.NumberOfPagesValue+"</li>","<li><b>"+b.BookPublisher+"</b>${Publisher}</li>","</ul>","</div>",i,'<div class="amazonjs_footer"></div>',"</div>"]};this.template(j);var k=this;a.each(this.addTemplateCallbacks,function(a,b){var c=b.call(k,k.partial);c&&k.template(c)})},addTemplateCallbacks:[],addTemplate:function(a){"function"==typeof a&&this.addTemplateCallbacks.push(a)},template:function(b){a.each(b,function(b,c){c&&a.template("amazonjs"+b+"Tpl","string"==typeof c?c:c.join(""))})},render:function(c){function d(a,b){for(var d=0,e=c.length;e>d;d++)if(c[d].ASIN==a&&c[d].CountryCode==b)return c[d]}function e(){if(f.length>0){var a=f.shift();a.fadeIn(),setTimeout(e,100)}}var f=[];this.initTemplate(),a("a[rel='amazonjs']").each(function(){var c=a(this).attr("class").split(" "),e=c[0].split("_"),g=e[1],h=e[2],i=e.length>3?e[3]:null,j=d(g,h);if(j){var k=a.amazonjs.tmpl(j,a.amazonjs.formatTmplName(i));a(this).replaceWith(k.hide());var l=k.find(".amazonjs_review");b?l.css({"float":"right",position:"static",marginRight:"32px"}):k.css("position","relative"),l.click(function(){return tb_show(this.title,this.href),this.blur(),!1}),f.push(k)}else{i="Link"+h.toUpperCase(),j={asins:g,fc1:"000000",lc1:"0000FF",bc1:"000000",bg1:"FFFFFF",IS2:1,lt1:"_blank",f:"ifr",m:"amazon"};var k=a.amazonjs.tmpl(j,a.amazonjs.formatTmplName(i));a(this).replaceWith(k)}}),e()},formatTmplName:function(a){return a?"amazonjs"+a+"Tpl":null},formatNumber:function(a){a+="";for(var b=a.split("."),c=b[0],d=b.length>1?"."+b[1]:"",e=/(\d+)(\d{3})/;e.test(c);)c=c.replace(e,"$1,$2");return c+d},formatDateTime:function(a){var b=new Date(1e3*a),c=b.getFullYear(),d=b.getMonth()+1,e=b.getDate(),f=b.getHours(),g=b.getMinutes();return 10>d&&(d="0"+d),10>e&&(e="0"+e),10>f&&(f="0"+f),10>g&&(g="0"+g),c+"/"+d+"/"+e+" "+f+":"+g},getTemplate:function(b){var c=this.formatTmplName("Small");if(b&&b.ProductGroup){var d=this.formatTmplName(b.ProductGroup);return a.template[d]||c}return c},prepareData:function(b){if(b.PublicationDate=b.PublicationDate||b.ReleaseDate,b.Manufacturer=b.Manufacturer||b.Label,b.SalesRank&&(b.SalesRank=this.formatNumber(b.SalesRank)),b.PublicationDate&&(b.PublicationDate=b.PublicationDate.replace(/-/g,"/")),b.ReleaseDate&&(b.ReleaseDate=b.ReleaseDate.replace(/-/g,"/")),b.Artist&&b.Creator){var c=[],d=a.isArray(b.Artist)?b.Artist:[b.Artist],e=a.isArray(b.Creator)?b.Creator:[b.Creator];a.each(e,function(b,e){-1==a.inArray(e,d)&&c.push(e)}),b.Creator=c.length?c:null}return b.UpdatedDate=this.formatDateTime(b.UpdatedAt),b},tmpl:function(b,c){return b=this.prepareData(b),!b.ListPrice&&b.OfferSummary&&(b.ListPrice=b.OfferSummary.LowestNewPrice),a.tmpl(a.template[c]||this.getTemplate(b),b,{isSale:function(){if(this.data){var a=this.data.ListPrice,b=Number(a.Amount),c=this.data.OfferSummary||{},d=c.LowestNewPrice||{},e=Number(d.Amount);return!isNaN(e)&&b>e}return!1}})}}}),amazonjsVars&&setTimeout(function(){amazonjsVars.isCustomerReviewEnabled&&("undefined"==typeof tb_pathToImage&&(tb_pathToImage=amazonjsVars.thickboxUrl+"/loadingAnimation.gif"),"undefined"==typeof tb_closeImage&&(tb_closeImage=amazonjsVars.thickboxUrl+"/tb-close.png")),a.amazonjs.isCustomerReviewEnabled=amazonjsVars.isCustomerReviewEnabled,a.amazonjs.resource=amazonjsVars.resource,a.amazonjs.template(amazonjsVars.regionTempalte),a.amazonjs.render(amazonjsVars.items)},1e3)}}(jQuery);